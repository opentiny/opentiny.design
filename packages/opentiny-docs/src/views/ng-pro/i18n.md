<h1 id='internation'>国际化</h1> 

----

`TinyPro of Ng`通过在`src/assets/i18n`的文件夹下添加不同语言的 ts 文件，引入`Angular`的国际化方案`@ngx-translate/core`来实现国际化的相关功能。

<h2 id='installation'>安装</h2>

```bash
npm install @ngx-translate/core --save
npm install @ngx-translate/http-loader --save
```

<h2 id='contents'>目录结构</h2>

```bash
.
├── src/
│   └── assets/
│       │── i18n/
│       │    │── en-US/    (存放所有模块的英文翻译文件)
│       │    │── zh-CN/    (存放所有模块的中文翻译文件)
│       │    │── en-US.ts
│       │    └── zh-CN.ts
```

<h2 id='code'>添加国际化代码</h2>

修改`Angular`应用入口文件`app.component.ts`。

```typescript
import { Component } from '@angular/core';
import { TranslateService } from '@ngx-translate/core';
import { TiLocale } from '@opentiny/ng';
import { DEFAULT_LANG, I18N_LANGUAGES } from '@config/tiny-pro';
@Component({
  selector: 't-pro-app',
  template: `<router-outlet></router-outlet>`,
})
export class AppComponent {
  currentLang = localStorage.getItem('lang') || window.navigator.language.toLowerCase() || DEFAULT_LANG;

  constructor(private translate: TranslateService) {
    this.translate.addLangs(I18N_LANGUAGES);
    this.translate.setDefaultLang(DEFAULT_LANG);
    this.translate.use(this.currentLang);
    TiLocale.setLocale(this.currentLang === 'zh-cn' ? TiLocale.ZH_CN : TiLocale.EN_US);
  }
}
```

<h2 id='file'>编写国际化文件</h2>

在中文`zh-CN`文件夹下新建模块对应的文件

```typescript
// console-home.ts
export default {
  consoleHome: {
    title: '控制台首页',
    ......
  }
} 
// service-overview.ts
export default {
  serviceOverview: {
    title: '服务总览页',
    .....
  }
}
....
```

在`zh-CN.ts`文件中引入对应的文件：

```typescript
import serviceList from './zh-CN/service-list';
import serviceOverview from './zh-CN/service-overview';

export default {
  ...consoleHome,
  ...serviceOverview,
  .....
}
```

同理在英文的`en-US`文件夹下新建模块补充对应的英文翻译，并在`en-US.ts`的文件中引入。
